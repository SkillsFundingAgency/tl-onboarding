!function(t,e,a,n){"function"==typeof define&&define.amd?define(function(){return t.TavoCalendar=n(e,a),t.TavoCalendar}):"object"==typeof exports?module.exports=n(e,a):e.TavoCalendar=n(e,a)}(this,window,document,function(t,e){"use strict";var a="tavo-calendar__nav",n="tavo-calendar__weekday govuk-!-padding-bottom-2 govuk-!-padding-top-2",s="tavo-calendar__day",o="tavo-calendar__day_select govuk-!-font-weight-bold",i="event-calendar__user-selected";function d(e,a){t.console&&t.console[e]&&t.console[e]("TavoCalendar: "+a)}function r(a,n){const s=t.moment||n.moment;if(s){if(this.elements={},a instanceof Element)this.elements.wrapper=a;else{if(!(a=e.querySelector(a)))return void d("warn","Element does not exist!");this.elements.wrapper=a}let t;this.elements.wrapper.classList.add("tavo-calendar"),n=Object.assign({},l,n),this.state={highlight:n.highlight||[],blacklist:n.blacklist||[],date_start:n.date_start,date_end:n.date_end,lock:n.lock||n.frozen},Array.isArray(n.selected)?this.state.selected=n.selected||[]:this.state.selected=n.selected?[n.selected]:[],t=n.date?s(n.date,n.format):s(),this.state.date=t.format(n.format),t.locale(n.locale),this.locale_data=t.localeData(),this.moment=t,this.config=n,this.mount(),this.bindEvents()}else d("error","moment.js library missing!")}var l={format:"YYYY-MM-DD",locale:"en",date:null,date_start:null,date_end:null,selected:[],highlight:[],blacklist:[],range_select:!1,multi_select:!1,future_select:!0,past_select:!1,frozen:!1,highlight_sunday:!0,highlight_saturday:!1};return r.prototype.mount=function(){var t,s,o,i,d,r,l=e.createElement("div");l.className="tavo-calendar__info",this.state.date_start?l.style.display="block":l.style.display="none",(t=e.createElement("div")).className="tavo-calendar__code govuk-body govuk-!-font-size-19 govuk-!-margin-bottom-0",(s=e.createElement("div")).className="tavo-calendar__header govuk-!-font-weight-bold govuk-!-margin-bottom-2",(_=e.createElement("span")).className="tavo-calendar__month-label",_.textContent=this.moment.format("MMMM YYYY"),(o=e.createElement("a")).setAttribute("href","#"),o.setAttribute("data-calendar-prev",""),o.className="tavo-calendar__nav_prev govuk-link "+a,o.innerHTML='<svg width="13" height="20" viewBox="0 0 13 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11 2L3 10L11 18" stroke="#1D70B8" stroke-width="3"/></svg>',(i=e.createElement("a")).setAttribute("href","#"),o.setAttribute("data-calendar-next",""),i.className="tavo-calendar__nav_next govuk-link "+a,i.innerHTML='<svg width="13" height="20" viewBox="0 0 13 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 18L10 10L2 2" stroke="#1D70B8" stroke-width="3"/></svg>',s.appendChild(o),s.appendChild(_),s.appendChild(i),(d=e.createElement("div")).className="tavo-calendar__week-names govuk-!-font-weight-bold";for(var c=[],h=1;h<7;h++){var m=e.createElement("span");m.className=n,m.textContent=this.locale_data.weekdaysShort()[h].substr(0,1),c.push(m)}(g=e.createElement("span")).className=n,g.textContent=this.locale_data.weekdaysShort()[0].substr(0,1),0==this.locale_data.firstDayOfWeek()?c.unshift(g):c.push(g),c.map(function(t){d.appendChild(t)}),(r=e.createElement("div")).className="tavo-calendar__days";const p=this.moment.clone();p.startOf("month");var v=p.isoWeekday()%(7+this.locale_data.firstDayOfWeek());if(0<v){var f=v,u=p.clone();for(u.add(-Math.abs(v),"d"),h=this.locale_data.firstDayOfWeek();h<v;h++)f--,this.buildDay(u.daysInMonth()-f,u,r,!0)}for(var _=p.year(),g=p.month(),y=p.daysInMonth(),w=1;w<=y;w++)this.buildDay(w,p,r);p.year(_).month(g),p.endOf("month");const Y=p.clone();for(Y.add(1,"d"),h=0;h<6-p.day();h++)this.buildDay(h+1,Y,r,!0);t.appendChild(s),t.appendChild(d),t.appendChild(r),_=e.createElement("span"),g=e.createElement("span"),s=e.createElement("span"),_.className="tavo-calendar__select-date",g.className="tavo-calendar__select-start",s.className="tavo-calendar__select-end",this.state.day&&(_.textContent=this.moment.format(this.config.format)),this.state.date_start&&(g.textContent=this.state.date_start),this.state.date_end&&(s.textContent=this.state.date_end),this.state.date_start&&this.state.date_end?(l.appendChild(g),l.appendChild(e.createTextNode(" - ")),l.appendChild(s)):this.config.range&&this.state.date_start?(l.appendChild(g),l.appendChild(e.createTextNode(" - "))):this.state.day&&l.appendChild(_),this.elements.wrapper.appendChild(l),this.elements.wrapper.appendChild(t),this.elements.calendar_select_date=_,this.elements.calendar_select_date_start=g,this.elements.calendar_select_date_end=s,this.elements.calendar_info=l,this.elements.calendar_code=t,this.elements.calendar_nav_prev=o,this.elements.calendar_nav_next=i,sizeSizer("calendar"),sizeSizer("calendar-list")},r.prototype.dayClick=function(t,e){e.classList.contains(o.split(" ")[0])&&(e.classList.contains(i)?(e.classList.remove(i),this.setFocusYear(moment(t).format("YYYY")),this.setFocusMonth(moment(t).format("MM")),updateEventListMonth(moment(t).format("YYYY-MM"))):(updateEventListDay(t),e.classList.add(i)))},r.prototype.setFocusYear=function(t){t!==this.moment.format("YYYY")&&(this.moment.set("year",t),this.config.date=this.moment.format("YYYY-MM-DD"),this.destroy(),this.mount(),this.bindEvents())},r.prototype.setFocusMonth=function(t){if(t!==this.moment.format("MM")){if(t=Number.parseInt(t),Number.isNaN(t))throw new Error("Invalid month.");this.moment.set("month",0==t?0:t-1),this.config.date=this.moment.format("YYYY-MM-DD"),this.destroy(),this.mount(),this.bindEvents()}},r.prototype.nextMonth=function(t){this.moment.add(1,"month"),this.destroy(),this.mount(),this.bindEvents(),updateEventListMonth(this.moment.format("YYYY-MM"))},r.prototype.prevMonth=function(t){this.moment.subtract(1,"month"),this.destroy(),this.mount(),this.bindEvents(),updateEventListMonth(this.moment.format("YYYY-MM"))},r.prototype.bindEvents=function(){var t=this;this.elements.calendar_nav_next.addEventListener("click",function(e){t.nextMonth(e),t.elements.wrapper.dispatchEvent(new Event("calendar-change"))}),this.elements.calendar_nav_prev.addEventListener("click",function(e){t.prevMonth(e),t.elements.wrapper.dispatchEvent(new Event("calendar-change"))}),this.elements.calendar_code.addEventListener("click",function(e){e.preventDefault(),t.state.lock&&(e.stopImmediatePropagation(),t.removeLock())},!0)},r.prototype.destroy=function(){this.elements.wrapper.innerHTML=""},r.prototype.buildDay=function(t,a,n,i){var d,r=e.createElement("span");r.className=i?s+" tavo-calendar__day_different-month":s,r.setAttribute("data-calendar-day-date",moment(a).format("YYYY-MM-DD")),-1<this.state.selected.indexOf(a.format(this.config.format))?(d=e.createElement("a")).setAttribute("href","#"):d=e.createElement("span"),d.className="tavo-calendar__day-inner";var l=this,c=a.format(l.config.format);r.addEventListener("click",function(t){l.dayClick(c,t.currentTarget)},!0),d.textContent=t,r.className=r.className,-1<this.state.selected.indexOf(a.format(this.config.format))&&(r.className=r.className+" "+o),r.appendChild(d),n.appendChild(r),a.add(1,"d"),(a=e.createElement("a")).setAttribute("href","#"),a.setAttribute("data-calendar-close",""),a.className="event-calendar__user-selected__close",a.innerHTML='<svg width="9" height="9" viewBox="0 0 9 9" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.51962 0L5.67268 4.19247L9 9H6.68289L4.47174 5.72385L2.34537 9H0L3.32732 4.20502L0.38854 0H2.67739L4.48587 2.78033L6.29435 0H8.51962Z" fill="white"/></svg>',r.appendChild(a)},r}),window.jQuery&&window.TavoCalendar&&function(t,e){"use strict";t.fn.tavoCalendar=function(t){return new e(this[0],t)}}(window.jQuery,window.TavoCalendar);